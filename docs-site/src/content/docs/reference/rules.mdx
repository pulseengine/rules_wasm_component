---
title: Rule Reference
description: Complete reference for all WebAssembly Component Model Bazel rules
---

# Rule Reference

Complete reference documentation for all Bazel rules provided by rules_wasm_component.

> **Note:** This documentation is automatically generated from rule definitions in the source code.
> For the most up-to-date information, see the [source repository](https://github.com/pulseengine/rules_wasm_component).

## Table of Contents

- [WIT & Interface Rules](#wit-interface-rules)
  - [wit_bindgen](#wit_bindgen)
  - [wit_deps_check](#wit_deps_check)
  - [wit_library](#wit_library)
  - [wit_markdown](#wit_markdown)
- [Rust Component Rules](#rust-component-rules)
  - [rust_wasm_component](#rust_wasm_component)
  - [rust_wasm_component_bindgen](#rust_wasm_component_bindgen)
  - [rust_wasm_component_test](#rust_wasm_component_test)
- [Go Component Rules](#go-component-rules)
  - [go_wasm_component](#go_wasm_component)
  - [go_wit_bindgen](#go_wit_bindgen)
- [JavaScript Component Rules](#javascript-component-rules)
  - [jco_transpile](#jco_transpile)
  - [js_component](#js_component)
  - [npm_install](#npm_install)
- [C++ Component Rules](#c-component-rules)
  - [cc_component_library](#cc_component_library)
  - [cpp_component](#cpp_component)
  - [cpp_wit_bindgen](#cpp_wit_bindgen)
- [Composition Rules](#composition-rules)
  - [wac_compose](#wac_compose)
  - [wac_remote_compose](#wac_remote_compose)
- [RPC & Communication](#rpc-communication)
  - [wrpc_bindgen](#wrpc_bindgen)
  - [wrpc_invoke](#wrpc_invoke)
  - [wrpc_serve](#wrpc_serve)
- [Component Tools](#component-tools)
  - [wasm_component_new](#wasm_component_new)
  - [wasm_component_wizer_library](#wasm_component_wizer_library)
  - [wasm_validate](#wasm_validate)
- [Security & Signing](#security-signing)
  - [wasm_keygen](#wasm_keygen)
  - [wasm_sign](#wasm_sign)
  - [wasm_verify](#wasm_verify)
- [Registry & Distribution](#registry-distribution)
  - [wasm_component_from_oci](#wasm_component_from_oci)
  - [wkg_registry_config](#wkg_registry_config)
- [Providers](#providers)
  - [WacCompositionInfo](#waccompositioninfo)
  - [WasmComponentInfo](#wasmcomponentinfo)
  - [WitInfo](#witinfo)

## WIT & Interface Rules

### wit_bindgen

Generates language bindings from WIT files using wit-bindgen tool. Creates bindings for various target languages from WebAssembly Interface Types.

**Load from:**
```python
load("@rules_wasm_component//wit:defs.bzl", "wit_bindgen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `language` | String<br/>*Values: rust, c, go, python, js* | ‚úÖ | Target language for binding generation |
| `name` | String | ‚úÖ | A unique name for this target |
| `options` | List of Strings | ‚ùå | Additional options for wit-bindgen |
| `wit` | Label | ‚úÖ | WIT library to generate bindings for |
| `world` | String | ‚ùå | Specific world to generate bindings for |

**Examples:**

Generate Rust bindings from WIT

```python
wit_bindgen(
    name = "rust_bindings",
    wit = ":my_interfaces",
    language = "rust",
)
```

### wit_deps_check

Analyzes a WIT file for missing dependencies and suggests fixes. Helps developers identify and resolve dependency issues.

**Load from:**
```python
load("@rules_wasm_component//wit:defs.bzl", "wit_deps_check")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `wit_file` | Label | ‚úÖ | WIT file to analyze for dependencies |

**Examples:**

Check a WIT file for missing dependencies

```python
wit_deps_check(
    name = "check_deps",
    wit_file = "consumer.wit",
)
```

### wit_library

Defines a WIT (WebAssembly Interface Types) library. Processes WIT files and makes them available for use in WASM component builds and binding generation.

**Load from:**
```python
load("@rules_wasm_component//wit:defs.bzl", "wit_library")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `deps` | List of Labels | ‚ùå | WIT library dependencies. Each dependency must provide WitInfo. |
| `interfaces` | List of Strings | ‚ùå | List of interface names defined in this library |
| `name` | String | ‚úÖ | A unique name for this target |
| `package_name` | String | ‚ùå | WIT package name (e.g., 'my:package@1.0.0'). Defaults to target name if not specified. |
| `srcs` | List of Labels | ‚úÖ | WIT source files (*.wit) |
| `world` | String | ‚ùå | Optional world name to export from this library |

**Examples:**

#### Simple WIT library

Basic WIT library with a single interface file

```python
wit_library(
    name = "my_interfaces",
    package_name = "my:pkg@1.0.0",
    srcs = ["interfaces.wit"],
)
```

#### WIT library with dependencies

WIT library that imports from another package

```python
wit_library(
    name = "consumer_interfaces",
    package_name = "consumer:app@1.0.0",
    srcs = ["consumer.wit"],
    deps = ["//external:lib_interfaces"],
)
```

### wit_markdown

Generates markdown documentation from WIT files. Creates human-readable documentation from WebAssembly Interface Types.

**Load from:**
```python
load("@rules_wasm_component//wit:defs.bzl", "wit_markdown")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `wit` | Label | ‚úÖ | WIT library to generate documentation for |

**Examples:**

Create markdown documentation from WIT

```python
wit_markdown(
    name = "api_docs",
    wit = ":my_interfaces",
)
```

## Rust Component Rules

### rust_wasm_component

Builds a Rust WebAssembly component. Compiles Rust source code into a WASM component using the Rust toolchain.

**Load from:**
```python
load("@rules_wasm_component//rust:defs.bzl", "rust_wasm_component")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `adapter` | Label | ‚ùå | Optional WASI adapter |
| `crate_features` | List of Strings | ‚ùå | Rust crate features |
| `deps` | List of Labels | ‚ùå | Rust dependencies (crates) |
| `name` | String | ‚úÖ | A unique name for this target |
| `rustc_flags` | List of Strings | ‚ùå | Additional rustc flags |
| `srcs` | List of Labels | ‚úÖ | Rust source files |

**Examples:**

Simple Rust WASM component

```python
rust_wasm_component(
    name = "my_component",
    srcs = ["src/lib.rs"],
    deps = ["@crates//:serde"],
)
```

### rust_wasm_component_bindgen

Builds a Rust WebAssembly component with WIT binding generation. Compiles Rust source code into a WASM component and generates language bindings from WIT interfaces.

**Generated Targets:**
- `{name}_bindings_host`: Host-platform rust_library for host applications (e.g., test runners, benchmarks)
- `{name}_bindings`: WASM-platform rust_library for WASM components
- `{name}`: The final WASM component

> **üìñ Deep Dive:** For detailed guidance on when to use host vs WASM bindings, see [Host vs WASM Bindings Guide](/guides/host-vs-wasm-bindings/).

**Load from:**
```python
load("@rules_wasm_component//rust:defs.bzl", "rust_wasm_component_bindgen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `deps` | List of Labels | ‚ùå | Rust dependencies (crates) |
| `name` | String | ‚úÖ | A unique name for this target |
| `profiles` | List of Strings<br/>*Default: ['release']*<br/>*Values: debug, release, custom* | ‚ùå | Build profiles to generate |
| `srcs` | List of Labels | ‚úÖ | Rust source files |
| `wit` | Label | ‚úÖ | WIT library target that provides interfaces for this component |

**Examples:**

#### Basic Rust component

Simple Rust WASM component with WIT bindings

```python
rust_wasm_component_bindgen(
    name = "my_component",
    srcs = ["src/lib.rs"],
    wit = ":my_interfaces",
)
```

#### Multi-profile component

Component built with multiple optimization profiles

```python
rust_wasm_component_bindgen(
    name = "my_component",
    srcs = ["src/lib.rs"],
    wit = ":my_interfaces",
    profiles = ["debug", "release"],
)
```

#### Host applications using component bindings

When building host applications that need to use component bindings (e.g., for testing or benchmarking), use the `*_bindings_host` target:

```python
rust_binary(
    name = "component_test_runner",
    srcs = ["tests/runner.rs"],
    deps = [":my_component_bindings_host"],  # Host bindings for host app
)

# The component implementation uses WASM bindings automatically
rust_wasm_component_bindgen(
    name = "my_component",
    srcs = ["src/lib.rs"],  # Uses my_component_bindings (WASM platform)
    wit = ":my_interfaces",
)
```

> **üìñ Complete Guide:** See [Host vs WASM Bindings](/guides/host-vs-wasm-bindings/) for detailed examples and use cases.

### rust_wasm_component_test

Tests a Rust WASM component using wasmtime runtime. Provides automated testing for WebAssembly components.

**Load from:**
```python
load("@rules_wasm_component//rust:defs.bzl", "rust_wasm_component_test")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `component` | Label | ‚úÖ | WASM component to test |
| `name` | String | ‚úÖ | A unique name for this target |

**Examples:**

Test a WASM component

```python
rust_wasm_component_test(
    name = "my_component_test",
    component = ":my_component",
)
```

## Go Component Rules

### go_wasm_component

Builds a Go WebAssembly component using TinyGo. Compiles Go source code into a WASM component with WASI Preview 2 support.

**Load from:**
```python
load("@rules_wasm_component//go:defs.bzl", "go_wasm_component")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `adapter` | Label | ‚ùå | Optional WASI adapter |
| `go_mod` | Label | ‚ùå | go.mod file for dependency management |
| `name` | String | ‚úÖ | A unique name for this target |
| `optimization` | String<br/>*Default: 'release'*<br/>*Values: debug, release* | ‚ùå | Build optimization level |
| `srcs` | List of Labels | ‚úÖ | Go source files |
| `world` | String | ‚ùå | WIT world for the component |

**Examples:**

Simple Go WASM component with TinyGo

```python
go_wasm_component(
    name = "calculator_component",
    srcs = ["calculator.go", "main.go"],
    go_mod = "go.mod",
    optimization = "release",
)
```

### go_wit_bindgen

Legacy compatibility function for Go WIT binding generation. **DEPRECATED**: WIT binding generation is now handled automatically by go_wasm_component rule. This function exists for backward compatibility with existing examples and creates a placeholder genrule. For new code, use go_wasm_component directly with wit and world attributes.

**Load from:**
```python
load("@rules_wasm_component//go:defs.bzl", "go_wit_bindgen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |

**Examples:**

Placeholder for backward compatibility (use go_wasm_component instead)

```python
// DEPRECATED: Use go_wasm_component instead
go_wit_bindgen(
    name = "calculator_bindings",
)

// RECOMMENDED: Use go_wasm_component directly
go_wasm_component(
    name = "calculator_component",
    srcs = ["calculator.go"],
    wit = ":calculator_wit",
    world = "calculator",
)
```

## JavaScript Component Rules

### jco_transpile

Transpiles WebAssembly components to JavaScript using jco (JavaScript Component Tools). Converts WASM components into JavaScript modules.

**Load from:**
```python
load("@rules_wasm_component//js:defs.bzl", "jco_transpile")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `component` | Label | ‚úÖ | WebAssembly component to transpile |
| `name` | String | ‚úÖ | A unique name for this target |
| `options` | List of Strings | ‚ùå | Additional jco options |

**Examples:**

Convert WASM component to JavaScript

```python
jco_transpile(
    name = "calculator_js_bindings",
    component = ":calculator_component",
)
```

### js_component

Builds a JavaScript WebAssembly component using ComponentizeJS. Transpiles JavaScript/TypeScript source code into a WASM component.

**Load from:**
```python
load("@rules_wasm_component//js:defs.bzl", "js_component")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `entry_point` | String<br/>*Default: index.js* | ‚ùå | Main entry point file |
| `name` | String | ‚úÖ | A unique name for this target |
| `package_json` | Label | ‚ùå | package.json file (auto-generated if not provided) |
| `srcs` | List of Labels | ‚úÖ | JavaScript/TypeScript source files |
| `wit` | Label | ‚úÖ | WIT library for the component interfaces |

**Examples:**

JavaScript WebAssembly component

```python
js_component(
    name = "calculator_js",
    srcs = ["src/calculator.js"],
    wit = ":calculator_wit",
)
```

### npm_install

Installs NPM dependencies for JavaScript components. Runs npm install to fetch dependencies specified in package.json, making them available for JavaScript component builds.

**Load from:**
```python
load("@rules_wasm_component//js:defs.bzl", "npm_install")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `package_json` | Label | ‚úÖ | package.json file with dependencies |

**Examples:**

Install NPM dependencies

```python
npm_install(
    name = "npm_deps",
    package_json = "package.json",
)
```

## C++ Component Rules

### cc_component_library

Creates a static library for use in WebAssembly components. Compiles C/C++ source files into a static library that can be linked into WebAssembly components.

**Load from:**
```python
load("@rules_wasm_component//cpp:defs.bzl", "cc_component_library")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `copts` | List of Strings | ‚ùå | Additional compiler options |
| `cxx_std` | String | ‚ùå | C++ standard (e.g., c++17, c++20, c++23) |
| `defines` | List of Strings | ‚ùå | Preprocessor definitions |
| `deps` | List of Labels | ‚ùå | Dependencies (other cc_component_library targets) |
| `enable_exceptions` | Boolean | ‚ùå | Enable C++ exceptions (increases binary size) |
| `hdrs` | List of Labels | ‚ùå | C/C++ header files |
| `includes` | List of Strings | ‚ùå | Additional include directories |
| `language` | String<br/>*Default: 'cpp'*<br/>*Values: c, cpp* | ‚ùå | Language variant (c or cpp) |
| `name` | String | ‚úÖ | A unique name for this target |
| `optimize` | Boolean<br/>*Default: True* | ‚ùå | Enable optimizations |
| `srcs` | List of Labels | ‚úÖ | C/C++ source files |

**Examples:**

Create a static library for components

```python
cc_component_library(
    name = "math_utils",
    srcs = ["math.cpp", "algorithms.cpp"],
    hdrs = ["math.h", "algorithms.h"],
    language = "cpp",
    cxx_std = "c++20",
    optimize = True,
)
```

### cpp_component

Builds a C++ WebAssembly component using WASI SDK. Compiles C++ source code into a WASM component with Preview2 support.

**Load from:**
```python
load("@rules_wasm_component//cpp:defs.bzl", "cpp_component")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `deps` | List of Labels | ‚ùå | C++ dependencies |
| `hdrs` | List of Labels | ‚ùå | C++ header files |
| `name` | String | ‚úÖ | A unique name for this target |
| `srcs` | List of Labels | ‚úÖ | C++ source files |
| `wit` | Label | ‚ùå | WIT library for component interfaces |

**Examples:**

C++ WebAssembly component

```python
cpp_component(
    name = "calculator_cpp",
    srcs = ["calculator.cpp"],
    hdrs = ["calculator.h"],
)
```

### cpp_wit_bindgen

Generates C/C++ bindings from WIT interface definitions. Creates header and source files for WebAssembly component development.

**Load from:**
```python
load("@rules_wasm_component//cpp:defs.bzl", "cpp_wit_bindgen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `string_encoding` | String<br/>*Values: utf8, utf16, compact-utf16* | ‚ùå | String encoding to use in generated bindings |
| `stubs_only` | Boolean | ‚ùå | Generate only stub functions without implementation |
| `wit` | Label | ‚úÖ | WIT interface definition file |
| `world` | String | ‚ùå | WIT world to generate bindings for |

**Examples:**

Generate C++ bindings from WIT

```python
cpp_wit_bindgen(
    name = "calculator_bindings",
    wit = "calculator.wit",
    world = "calculator",
    string_encoding = "utf8",
)
```

## Composition Rules

### wac_compose

Composes multiple WebAssembly components into a single application using WAC (WebAssembly Composition) format.

**Load from:**
```python
load("@rules_wasm_component//wac:defs.bzl", "wac_compose")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `components` | String Dictionary | ‚úÖ | Map of component targets to component names in composition |
| `composition` | String | ‚ùå | Inline WAC composition script |
| `composition_file` | Label | ‚ùå | WAC composition file (alternative to inline composition) |
| `name` | String | ‚úÖ | A unique name for this target |
| `profile` | String<br/>*Default: 'release'* | ‚ùå | Build profile for components |

**Examples:**

Compose two components with inline WAC script

```python
wac_compose(
    name = "my_app",
    components = {
        ":component_a": "comp_a",
        ":component_b": "comp_b",
    },
    composition = '''
        let a = new comp_a {};
        let b = new comp_b {};
        export a;
    ''',
)
```

### wac_remote_compose

Composes WebAssembly components including remote components from OCI registries. Enables distributed component architecture.

**Load from:**
```python
load("@rules_wasm_component//wac:defs.bzl", "wac_remote_compose")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `composition_file` | Label | ‚ùå | WAC composition file |
| `local_components` | String Dictionary | ‚ùå | Local component targets |
| `name` | String | ‚úÖ | A unique name for this target |
| `registry_config` | Label | ‚ùå | Registry configuration for OCI access |
| `remote_components` | String Dictionary | ‚ùå | Remote OCI component references |

**Examples:**

Compose local and remote components

```python
wac_remote_compose(
    name = "distributed_app",
    local_components = {
        ":frontend": "frontend",
    },
    remote_components = {
        "ghcr.io/org/backend:v1.0.0": "backend",
    },
    composition_file = "app.wac",
)
```

## RPC & Communication

### wrpc_bindgen

Generates language bindings for wrpc (WebAssembly Component RPC) from WIT interfaces. Creates client and server stubs for remote component communication.

**Load from:**
```python
load("@rules_wasm_component//wrpc:defs.bzl", "wrpc_bindgen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `language` | String<br/>*Default: 'rust'*<br/>*Values: rust, go* | ‚ùå | Target language for bindings |
| `name` | String | ‚úÖ | A unique name for this target |
| `wit` | Label | ‚úÖ | WIT file defining the interface |
| `world` | String | ‚úÖ | WIT world to generate bindings for |

**Examples:**

Generate Rust RPC bindings from WIT

```python
wrpc_bindgen(
    name = "api_bindings",
    wit = "api.wit",
    world = "api-world",
    language = "rust",
)
```

### wrpc_invoke

Invokes functions on remote WebAssembly components via wrpc. Creates executable scripts to call remote component functions.

**Load from:**
```python
load("@rules_wasm_component//wrpc:defs.bzl", "wrpc_invoke")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `address` | String<br/>*Default: 'localhost:8080'* | ‚ùå | Address of the remote component |
| `function` | String | ‚úÖ | Function to invoke on remote component |
| `name` | String | ‚úÖ | A unique name for this target |
| `transport` | String<br/>*Default: 'tcp'*<br/>*Values: tcp, nats* | ‚ùå | Transport protocol |

**Examples:**

Invoke a function on remote component

```python
wrpc_invoke(
    name = "call_api",
    function = "process-data",
    transport = "tcp",
    address = "localhost:8080",
)
```

### wrpc_serve

Serves a WebAssembly component via wrpc for remote procedure calls. Creates executable scripts to run components as RPC servers.

**Load from:**
```python
load("@rules_wasm_component//wrpc:defs.bzl", "wrpc_serve")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `address` | String<br/>*Default: '0.0.0.0:8080'* | ‚ùå | Address to bind server to |
| `component` | Label | ‚úÖ | WebAssembly component to serve |
| `name` | String | ‚úÖ | A unique name for this target |
| `transport` | String<br/>*Default: 'tcp'*<br/>*Values: tcp, nats* | ‚ùå | Transport protocol |

**Examples:**

Serve a component as RPC server

```python
wrpc_serve(
    name = "api_server",
    component = ":my_component",
    transport = "tcp",
    address = "0.0.0.0:8080",
)
```

## Component Tools

### wasm_component_new

Creates a WebAssembly component from a core WASM module using wasm-tools component new. Wraps core modules into the component model.

**Load from:**
```python
load("@rules_wasm_component//wasm:defs.bzl", "wasm_component_new")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `adapter` | Label | ‚ùå | WASI adapter to use |
| `module` | Label | ‚úÖ | Core WASM module to wrap |
| `name` | String | ‚úÖ | A unique name for this target |

**Examples:**

Convert core WASM module to component

```python
wasm_component_new(
    name = "my_component",
    module = ":my_module",
    adapter = "//wasm/adapters:wasi_snapshot_preview1",
)
```

### wasm_component_wizer_library

Pre-initializes a WebAssembly component using Wizer library for improved startup performance. Executes initialization functions at build time to reduce runtime overhead.

**Load from:**
```python
load("@rules_wasm_component//wasm:wasm_component_wizer_library.bzl", "wasm_component_wizer_library")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `allow_wasi` | Boolean<br/>*Default: True* | ‚ùå | Allow WASI calls during initialization |
| `component` | Label | ‚úÖ | Input WebAssembly component to pre-initialize |
| `init_function_name` | String<br/>*Default: 'wizer.initialize'* | ‚ùå | Name of the initialization function to call |
| `name` | String | ‚úÖ | A unique name for this target |
| `verbose` | Boolean | ‚ùå | Enable verbose output |

**Examples:**

Pre-initialize a WebAssembly component

```python
wasm_component_wizer_library(
    name = "optimized_component",
    component = ":my_component",
    init_function_name = "wizer.initialize",
    allow_wasi = True,
)
```

### wasm_validate

Validates WebAssembly components and modules using wasm-tools validate. Ensures WASM files are well-formed.

**Load from:**
```python
load("@rules_wasm_component//wasm:defs.bzl", "wasm_validate")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `wasm` | Label | ‚úÖ | WASM file to validate |

**Examples:**

Validate a WASM component

```python
wasm_validate(
    name = "validate_component",
    wasm = ":my_component",
)
```

## Security & Signing

### wasm_keygen

Generates cryptographic keys for WebAssembly component signing using wasmsign2. Creates key pairs for secure component distribution.

**Load from:**
```python
load("@rules_wasm_component//wasm:defs.bzl", "wasm_keygen")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `openssh_format` | Boolean | ‚ùå | Generate keys in OpenSSH format |

**Examples:**

Create signing keys

```python
wasm_keygen(
    name = "production_keys",
    openssh_format = True,
)
```

### wasm_sign

Signs WebAssembly components using wasmsign2 for secure deployment. Provides cryptographic signatures for component integrity.

**Load from:**
```python
load("@rules_wasm_component//wasm:defs.bzl", "wasm_sign")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `component` | Label | ‚ùå | WebAssembly component to sign (alternative to wasm_file) |
| `detached` | Boolean<br/>*Default: False* | ‚ùå | Create detached signature file |
| `keys` | Label | ‚ùå | Key pair from wasm_keygen or ssh_keygen |
| `name` | String | ‚úÖ | A unique name for this target |
| `openssh_format` | Boolean<br/>*Default: False* | ‚ùå | Use OpenSSH key format (when not using keys attribute) |
| `secret_key` | Label | ‚ùå | Secret key file (alternative to keys) |
| `wasm_file` | Label | ‚ùå | WASM file to sign (alternative to component) |

**Examples:**

Sign a WebAssembly component with embedded signature

```python
wasm_sign(
    name = "signed_component",
    component = ":my_component",
    keys = ":signing_keys",
    detached = false,
)
```

### wasm_verify

Verifies signatures of signed WebAssembly components using wasmsign2. Validates component authenticity and integrity.

**Load from:**
```python
load("@rules_wasm_component//wasm:defs.bzl", "wasm_verify")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `github_account` | String | ‚ùå | GitHub account for key verification |
| `keys` | Label | ‚ùå | Public key from key pair |
| `name` | String | ‚úÖ | A unique name for this target |
| `signed_component` | Label | ‚ùå | Signed component to verify |
| `split_regex` | String | ‚ùå | Regular expression for partial verification |
| `wasm_file` | Label | ‚ùå | WASM file to verify (alternative to signed_component) |

**Examples:**

Verify a signed WebAssembly component

```python
wasm_verify(
    name = "verify_component",
    signed_component = ":signed_component",
    keys = ":signing_keys",
)
```

## Registry & Distribution

### wasm_component_from_oci

Downloads WebAssembly components from OCI registries. Enables using remote components from container registries in builds.

**Load from:**
```python
load("@rules_wasm_component//wkg:defs.bzl", "wasm_component_from_oci")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `component_name` | String | ‚úÖ | Component name |
| `name` | String | ‚úÖ | A unique name for this target |
| `namespace` | String | ‚úÖ | Registry namespace |
| `registry` | String | ‚úÖ | Registry hostname |
| `registry_config` | Label | ‚ùå | Registry configuration |
| `tag` | String<br/>*Default: 'latest'* | ‚ùå | Component tag or version |

**Examples:**

Pull component from OCI registry

```python
wasm_component_from_oci(
    name = "auth_service",
    registry = "ghcr.io",
    namespace = "my-org",
    component_name = "auth-service",
    tag = "v1.0.0",
)
```

### wkg_registry_config

Configures WebAssembly component registries for OCI distribution. Sets up authentication and registry endpoints for component publishing and retrieval.

**Load from:**
```python
load("@rules_wasm_component//wkg:defs.bzl", "wkg_registry_config")
```

**Attributes:**

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `cache_dir` | String | ‚ùå | Directory for caching components |
| `default_registry` | String | ‚ùå | Default registry to use |
| `enable_mirror_fallback` | Boolean | ‚ùå | Enable fallback to mirror registries |
| `name` | String | ‚úÖ | A unique name for this target |
| `registries` | List of Strings | ‚úÖ | List of registry configurations |

**Examples:**

Configure multiple component registries

```python
wkg_registry_config(
    name = "production_registries",
    registries = [
        "github|ghcr.io|oci|env|GITHUB_TOKEN",
        "docker|docker.io|oci|env|DOCKER_TOKEN",
    ],
    default_registry = "github",
)
```

## Providers

### WacCompositionInfo

Provider that contains information about a WAC composition of multiple components.

**Provider Fields:**

| Field | Type | Description |
|-------|------|-------------|
| `components` | dict | Dictionary of component name to WasmComponentInfo |
| `composed_wasm` | File | The composed WASM file |
| `composition_wit` | File | WIT file describing the composition |
| `connections` | List of Strings | List of inter-component connections |
| `instantiations` | List of Strings | List of component instantiations |

**Examples:**

Access composition metadata

```python
def _my_rule_impl(ctx):
    composition_info = ctx.attr.composition[WacCompositionInfo]
    composed_wasm = composition_info.composed_wasm
    components = composition_info.components
    # Use composition_info...
```

### WasmComponentInfo

Provider that contains information about a compiled WebAssembly component.

**Provider Fields:**

| Field | Type | Description |
|-------|------|-------------|
| `component_type` | String | Type of component (module or component) |
| `exports` | List of Strings | List of exported interfaces |
| `imports` | List of Strings | List of imported interfaces |
| `metadata` | dict | Component metadata dictionary |
| `wasm_file` | File | The compiled WASM component file |
| `wit_info` | WitInfo | WitInfo provider from the component's interfaces |

**Examples:**

Access component metadata

```python
def _my_rule_impl(ctx):
    component_info = ctx.attr.component[WasmComponentInfo]
    wasm_file = component_info.wasm_file
    exports = component_info.exports
    # Use component_info...
```

### WitInfo

Provider that contains information about WIT interfaces and their dependencies.

**Provider Fields:**

| Field | Type | Description |
|-------|------|-------------|
| `interface_names` | List of Strings | List of interface names defined in this library |
| `package_name` | String | WIT package name (e.g., 'my:package@1.0.0') |
| `wit_deps` | Depset | Depset of transitive WIT dependencies |
| `wit_files` | Depset | Depset of WIT source files for this library |
| `world_name` | String | World name exported by this library (optional) |

**Examples:**

Access WIT metadata in rule implementations

```python
def _my_rule_impl(ctx):
    wit_info = ctx.attr.wit[WitInfo]
    package_name = wit_info.package_name
    wit_files = wit_info.wit_files.to_list()
    # Use wit_info...
```
