---
title: WIT & Interface Rules
description: Rules for working with WebAssembly Interface Types (WIT) files and interface generation
---

# WIT & Interface Rules

These rules handle **WebAssembly Interface Types (WIT)** - the interface definition language for WebAssembly components. Use these rules to define component interfaces, generate language bindings, and validate interface dependencies.

## Quick Reference

| Rule | Purpose | Most Common Use |
|------|---------|----------------|
| **[wit_bindgen](#wit_bindgen)** | Generate language bindings from WIT | Essential for every component |
| **[wit_library](#wit_library)** | Package WIT files for reuse | Interface libraries |  
| **[wit_deps_check](#wit_deps_check)** | Validate WIT dependencies | Troubleshooting |
| **[wit_markdown](#wit_markdown)** | Generate docs from WIT | Documentation |

---

## wit_bindgen

**üéØ Most important rule** - Generates language-specific bindings from WIT interface definitions.

### Usage

```python
load("@rules_wasm_component//wit:defs.bzl", "wit_bindgen")

wit_bindgen(
    name = "calculator_bindings",
    wit = ":calculator_interfaces",
    language = "rust",
    world = "calculator",
)
```

### Attributes

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `language` | String<br/>*Values: rust, c, go, python, js* | ‚úÖ | Target language for binding generation |
| `name` | String | ‚úÖ | A unique name for this target |
| `options` | List of Strings | ‚ùå | Additional options for wit-bindgen |
| `wit` | Label | ‚úÖ | WIT library to generate bindings for |
| `world` | String | ‚ùå | Specific world to generate bindings for |
| `with_mappings` | String Dict | ‚ùå | Interface and type remappings (key=value pairs) |
| `ownership` | String | ‚ùå | Type ownership model: "owning", "borrowing", "borrowing-duplicate-if-necessary" |
| `additional_derives` | List of Strings | ‚ùå | Additional derive attributes for generated types |
| `async_interfaces` | List of Strings | ‚ùå | Interfaces to generate with async support |

### Language-Specific Options

**Rust:**
```python
wit_bindgen(
    name = "rust_bindings",
    language = "rust", 
    ownership = "borrowing",  # Zero-copy performance
    additional_derives = ["Clone", "Debug", "Serialize"],
    async_interfaces = ["http-handler"],
)
```

**Go:**
```python
wit_bindgen(
    name = "go_bindings",
    language = "go",
    options = ["--gofmt"],  # Format generated code
)
```

**JavaScript:**
```python 
wit_bindgen(
    name = "js_bindings",
    language = "js",
    options = ["--typescript"],  # Generate TypeScript definitions
)
```

### Examples

**Basic Interface Generation:**
```python
wit_bindgen(
    name = "math_rust",
    wit = ":math_interfaces", 
    language = "rust",
)
```

**Advanced Rust with Interface Mapping:**
```python
wit_bindgen(
    name = "optimized_rust",
    wit = ":complex_interfaces",
    language = "rust",
    with_mappings = {
        "wasi:io/streams": "wasi::io::streams",  # Use existing types
        "wasi:http/types": "generate",           # Generate fresh
    },
    ownership = "borrowing-duplicate-if-necessary",
    additional_derives = ["Clone", "Debug", "PartialEq"],
)
```

---

## wit_library

**üì¶ Package WIT files** for reuse across multiple components and projects.

### Usage

```python
load("@rules_wasm_component//wit:defs.bzl", "wit_library")

wit_library(
    name = "shared_interfaces",
    srcs = ["interfaces.wit", "types.wit"],
    deps = ["@wasi//:io"],  # External WIT dependencies
)
```

### Attributes

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `srcs` | List of Labels | ‚úÖ | WIT source files to include |
| `deps` | List of Labels | ‚ùå | Other wit_library targets this depends on |

### Examples

**Simple Interface Library:**
```python
wit_library(
    name = "calculator_interfaces",
    srcs = ["calculator.wit"],
)
```

**Library with Dependencies:**
```python
wit_library(
    name = "http_service_interfaces", 
    srcs = ["service.wit", "types.wit"],
    deps = [
        "@wasi//:http",
        ":shared_types",
    ],
)
```

---

## wit_deps_check

**üîç Analyze WIT dependencies** and suggest fixes for missing or incorrect dependencies.

### Usage

```python
load("@rules_wasm_component//wit:defs.bzl", "wit_deps_check")

wit_deps_check(
    name = "check_calculator_deps",
    wit_file = "calculator.wit",
)
```

### Attributes

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `wit_file` | Label | ‚úÖ | WIT file to analyze |

### When to Use

- **Debugging interface errors** - "interface not found" messages
- **Adding new dependencies** - Understanding what's needed
- **Refactoring interfaces** - Ensuring dependencies are correct

---

## wit_markdown

**üìù Generate documentation** from WIT interface definitions.

### Usage

```python
load("@rules_wasm_component//wit:defs.bzl", "wit_markdown") 

wit_markdown(
    name = "api_docs",
    wit = ":calculator_interfaces",
    output_dir = "docs/api/",
)
```

### Attributes

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `name` | String | ‚úÖ | A unique name for this target |
| `wit` | Label | ‚úÖ | WIT library to generate docs for |
| `output_dir` | String | ‚ùå | Directory for generated markdown files |

### Examples

**Basic Documentation:**
```python
wit_markdown(
    name = "component_docs",
    wit = ":my_interfaces",
)
```

**Custom Output Location:**
```python
wit_markdown(
    name = "public_api_docs",
    wit = ":public_interfaces", 
    output_dir = "public/api-docs/",
)
```

---

## Related Rules

**Next Steps:**
- **[Language Rules](/reference/language-rules/)** - Use generated bindings in components
- **[Composition Rules](/reference/composition-rules/)** - Connect components together

**See Also:**
- **[WIT Bindgen Interface Mapping Guide](/build/patterns/wit-bindgen-interface-mapping/)** - Advanced wit_bindgen usage
- **[WIT Interface Design](/learn/wit-interface-design/)** - Best practices for WIT interfaces