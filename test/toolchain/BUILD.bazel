"""Tests for WASM toolchain functionality"""

# Test to validate the download toolchain fix
py_test(
    name = "validate_download_fix",
    timeout = "short",
    srcs = ["validate_download_fix.py"],
    tags = [
        "manual",
        "requires-network",
    ],  # Requires internet access
)

# Simple C++ binary to test the toolchain
cc_binary(
    name = "test_cc",
    srcs = ["test_cc.cpp"],
    target_compatible_with = [
        "@platforms//cpu:wasm32",
        "@platforms//os:wasi",
    ],
)

# Enterprise air-gap support test
# Verifies that BAZEL_WASM_MIRROR, BAZEL_WASM_VENDOR_DIR, and BAZEL_WASM_OFFLINE
# environment variables are properly supported in tool_registry.bzl
sh_test(
    name = "enterprise_mirror_test",
    timeout = "short",
    srcs = ["enterprise_mirror_test.sh"],
    data = [
        "//toolchains:tool_registry.bzl",
    ],
)
