# Export Macro Visibility Issue

## Problem

The `export!` macro generated by wit-bindgen is marked as `pub(crate)`, making it inaccessible when the bindings are compiled as a separate crate in `rust_wasm_component_bindgen`.

## Root Cause

wit-bindgen generates:

```rust
pub(crate) use __export_impl as export;
```

This is only visible within the crate, but `rust_wasm_component_bindgen` creates the bindings as a separate crate.

## Workaround

Until wit-bindgen is updated to generate public export macros, use the standard `rust_wasm_component` rule instead, which includes the bindings directly in your crate:

```python
load("@rules_wasm_component//rust:defs.bzl", "rust_wasm_component")

rust_wasm_component(
    name = "my_component",
    srcs = ["src/lib.rs"],
    wit_bindgen_target = "//path/to:wit_target",
    # This will include the bindings directly, making export! accessible
)
```

In your Rust code:

```rust
// The bindings are included directly, so export! is accessible
wit_bindgen::generate!();

struct MyComponent;

impl Guest for MyComponent {
    // ... implementation
}

export!(MyComponent);
```

## Long-term Solution

The proper fix requires either:

1. wit-bindgen to generate the export macro as `pub` instead of `pub(crate)`
2. A more sophisticated post-processing approach that rewrites all the visibility modifiers in the generated code

This is being tracked and will be addressed in a future update.
